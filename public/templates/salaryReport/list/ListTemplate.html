<% collection.forEach(function(emp, index){ %>
<%var fireMonth = emp.lastFire ? moment().isoWeek(parseInt(emp.lastFire.toString().slice(4, 6))).month() : null;%>
<%var checkYear = fireMonth ? parseInt(emp.lastFire.toString().slice(0, 4)) : 0 ;%>
<%if (fireMonth) {%>
 <%var fireKey = fireMonth ? checkYear * 100 + fireMonth : 0; %>
<%}%>
<tr data-id="<%=emp._id%>">
    <td><%= index + 1 %></td>
    <td>
        <%=emp.department ? emp.department : ''%>
    </td>
    <td>
        <%=emp ? emp.name: ''%>
    </td>
    <% for (var i = startKey + 1; i <= endKey + 1; i++) {%>
    <%var salary = '&nbsp;';%>
    <%var length =  emp.transfer.length; %>
    <%if (i <= parseInt(i.toString().slice(0, 4)) * 100 + 12) {%>
       <% for (var j = 0; j <= length - 1; j++) {%>
         <%if (i >= emp.transfer[j].hireDate) {%>
           <% salary = emp.transfer[j].transfer.salary; %>;
           <%if (fireKey && fireKey < i && fireKey > emp.transfer[j].hireDate) {%>
               <% salary ='&nbsp;';%>;
           <%}%>

          <%}%>
       <%}%>

    <%} else {%>
     <% i = (parseInt(i.toString().slice(0, 4)) + 1) * 100; %>
    <%continue;%>
    <%}%>

    <td data-id="<%=i%>"><%=salary%></td>

    <%}%>
</tr>
<% }) %>